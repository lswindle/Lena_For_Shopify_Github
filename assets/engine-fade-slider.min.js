(()=>{class t extends HTMLElement{constructor(){super();["keyupHandler","touchstartHandler","touchendHandler","mousedownHandler","mouseupHandler","swipeHandler","startRotation","stopRotation","blockSelectHandler","blockDeselectHandler"].forEach((t=>{this[t]=this[t].bind(this)}))}connectedCallback(){this.sliderFrame=this.querySelector('[data-name="fade-slider"]'),this.templateContent=this.querySelector(":scope > template").content,this.slideElems=[].slice.call(this.querySelectorAll('[data-name="fade-slide"]')),this.totalSlides=this.slideElems.length,this.totalSlides<2||(this.render(),this.attachEvents(),this.rotate&&this.startRotation())}render(){if(this.arrows){const t=this.templateContent.querySelector('[data-icon-type="prev"]').cloneNode(!0),e=this.templateContent.querySelector('[data-icon-type="next"]').cloneNode(!0);this.insertBefore(t,this.sliderFrame),this.appendChild(e),this.rotate||this.loop||this.setArrowOpacity()}if(this.mobileIndicator){const t=this.templateContent.querySelector('[data-name="mobile-indicator"]');if(t){const e=t.cloneNode(!0);this.appendChild(e)}}}attachEvents(){this.addEventListener("keyup",this.keyupHandler),this.swipe&&(this.sliderFrame.addEventListener("touchstart",this.touchstartHandler,{passive:!0}),this.sliderFrame.addEventListener("touchend",this.touchendHandler,{passive:!0}),this.sliderFrame.addEventListener("mousedown",this.mousedownHandler),this.sliderFrame.addEventListener("mouseup",this.mouseupHandler)),this.arrows&&(this.querySelector('[data-icon-type="next"]').addEventListener("click",this.next.bind(this)),this.querySelector('[data-icon-type="prev"]').addEventListener("click",this.prev.bind(this))),this.rotate&&(this.addEventListener("mouseover",this.stopRotation),this.addEventListener("focusin",this.stopRotation),this.addEventListener("mouseleave",this.startRotation),this.addEventListener("focusout",this.startRotation)),this.blocks&&window.Shopify.designMode&&(document.addEventListener("shopify:block:select",this.blockSelectHandler),document.addEventListener("shopify:block:deselect",this.blockDeselectHandler))}setActiveSlide(t){const e=this.querySelector("[data-fade-slider-active]"),s=this.querySelector(`[data-fade-slider-index="${t}"]`);this.fadeOut(e),this.fadeIn(s),!this.arrows||this.rotate||this.loop||this.setArrowOpacity()}fadeOut(t){t.removeAttribute("data-fade-slider-active"),t.classList.add("opacity-0","z-0"),t.classList.remove("z-[1]");const e=t.querySelector("a");e&&e.setAttribute("tabindex","-1")}fadeIn(t){t.setAttribute("data-fade-slider-active",""),t.classList.remove("opacity-0","z-0"),t.classList.add("z-[1]");const e=t.querySelector("a");e&&e.setAttribute("tabindex","0")}mousedownHandler(t){this.swipeStart=t.screenX}mouseupHandler(t){this.swipeEnd=t.screenX,this.swipeHandler()}touchstartHandler(t){this.swipeStart=t.changedTouches[0].screenX}touchendHandler(t){this.swipeEnd=t.changedTouches[0].screenX,this.swipeHandler()}swipeHandler(){this.swipeEnd<this.swipeStart?this.next():this.swipeEnd>this.swipeStart&&this.prev()}keyupHandler(t){switch(t.key){case"ArrowRight":this.next();break;case"ArrowLeft":this.prev()}}next(){const t=+this.querySelector("[data-fade-slider-active]").dataset.fadeSliderIndex,e=t==this.totalSlides-1?0:t+1,s=this.rotate||this.loop?e:Math.min(t+1,this.totalSlides-1);this.setActiveSlide(s),this.rotate&&document.activeElement!==this&&(this.stopRotation(),this.startRotation())}prev(){const t=+this.querySelector("[data-fade-slider-active]").dataset.fadeSliderIndex,e=0==t?this.totalSlides-1:t-1,s=this.rotate||this.loop?e:Math.max(t-1,0);this.setActiveSlide(s),this.rotate&&document.activeElement!==this&&(this.stopRotation(),this.startRotation())}setArrowOpacity(){const t=this.querySelector('[data-icon-type="prev"]'),e=this.querySelector('[data-icon-type="next"]');t.style.opacity="",e.style.opacity="",t.ariaDisabled="false",e.ariaDisabled="false",t.setAttribute("tabindex","0"),e.setAttribute("tabindex","0"),this.atStart()?(t.style.opacity=0,t.ariaDisabled="true",t.setAttribute("tabindex","-1")):this.atEnd()&&(e.style.opacity=0,e.ariaDisabled="true",e.setAttribute("tabindex","-1"))}atStart(){return 0==this.querySelector("[data-fade-slider-active]").dataset.fadeSliderIndex}atEnd(){return this.querySelector("[data-fade-slider-active]").dataset.fadeSliderIndex==this.totalSlides-1}startRotation(){this.rotation=setTimeout(this.next.bind(this),this.rotationInterval)}stopRotation(){clearTimeout(this.rotation)}blockSelectHandler(t){const e=t.target.dataset.fadeSliderIndex;e&&this.setActiveSlide(e),this.rotate&&this.stopRotation()}blockDeselectHandler(t){this.rotate&&this.startRotation()}get arrows(){return"true"===this.getAttribute("arrows")}get mobileIndicator(){return"true"===this.getAttribute("mobile-indicator")}get swipe(){return"true"===this.getAttribute("swipe")}get loop(){return"true"===this.getAttribute("loop")}get rotate(){return"true"===this.getAttribute("rotate")}get rotationInterval(){return this.getAttribute("rotation-interval")?this.getAttribute("rotation-interval"):"5000"}get blocks(){return"true"===this.getAttribute("blocks")}detachEvents(){this.removeEventListener("keyup",this.keyupHandler),this.swipe&&(this.sliderFrame.removeEventListener("touchstart",this.touchstartHandler),this.sliderFrame.removeEventListener("touchend",this.touchendHandler),this.sliderFrame.removeEventListener("mousedown",this.mousedownHandler),this.sliderFrame.removeEventListener("mouseup",this.mouseupHandler)),this.arrows&&(this.querySelector('[data-icon-type="next"]').removeEventListener("click",this.next.bind(this)),this.querySelector('[data-icon-type="prev"]').removeEventListener("click",this.prev.bind(this))),this.rotate&&(this.removeEventListener("mouseover",this.stopRotation),this.removeEventListener("focusin",this.stopRotation),this.removeEventListener("mouseleave",this.startRotation),this.removeEventListener("focusout",this.startRotation)),this.blocks&&window.Shopify.designMode&&(document.removeEventListener("shopify:block:select",this.blockSelectHandler),document.removeEventListener("shopify:block:deselect",this.blockDeselectHandler))}disconnectedCallback(){this.totalSlides<2||this.detachEvents()}}customElements.define("fade-slider",t)})();