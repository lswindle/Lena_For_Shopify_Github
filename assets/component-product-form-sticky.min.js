(()=>{var t={845:t=>{self,t.exports=(()=>{"use strict";var t={};return((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isArmadaLoaded=void 0,e.isArmadaLoaded=t=>{var e,r;const o=!0===(null===(r=null===(e=window.eight)||void 0===e?void 0:e.armada)||void 0===r?void 0:r.loaded);if(!t)return o;o?t():document.addEventListener("ARMADA:LOADED",t)},e.default=e.isArmadaLoaded})(0,t),t})()}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(845);class e extends HTMLElement{constructor(){super(),this.productProperties=this.mainProductForm.querySelectorAll('[name^=properties]:not([disabled]):not([type="hidden"])'),this.stickyForm=this.querySelector("form"),this.getAttribute("product-id")}connectedCallback(){(0,t.isArmadaLoaded)(this.init.bind(this))}init(){this.productProperties.forEach((t=>{t.addEventListener("change",(t=>this.handleCustomProperties(t)))})),this.handleVisibility();const t=this.querySelector('[data-armada-selector="select-wrap"]');t&&t.parentNode.classList.remove("no-js-show");const e=this.querySelector('[data-name="basic-product-form"] form');e.classList.add("w-full");const r=e.querySelector("select");r&&r.classList.remove("no-js-show"),window.eight.armada.elementRegistry.register({key:"product-form-sticky",assetPath:"/assets/component-product-form-sticky.min.js"})}handleVisibility(){const t=new IntersectionObserver((t=>{!t[0].isIntersecting&&t[0].boundingClientRect.top<0?(this.removeAttribute("hidden"),this.selectEls?this.selectEls[0].focus():this.button&&this.button.focus()):this.setAttribute("hidden","")}),{root:null,rootMargin:"0px",threshold:.5});this.mainProductForm&&t.observe(this.mainProductForm)}handleCustomProperties(t){const e=t.target.cloneNode(!0),r="SELECT"==t.target.nodeName;if(e&&this.stickyForm){const o=this.stickyForm.querySelector(`[name="${e.name}"]`);if(o&&o.remove(),e.classList.add("hidden"),r){const r=t.target.options[t.target.selectedIndex].value,o=e.querySelector(`option[value="${r}"]`);o&&o.setAttribute("selected","")}this.stickyForm.appendChild(e)}}get button(){return this.querySelector('[data-name="product-submit"]')}get selectEls(){return this.querySelectorAll('[data-armada-selector="select-wrap"] select')}get sectionId(){return!!this.dataset.sectionId&&this.dataset.sectionId}get productId(){return!!this.getAttribute("product-id")&&this.getAttribute("product-id")}get childForm(){return this.querySelector(`[data-name="main-product-form"][section-id="${this.sectionId}"]`)}get childFormTemplate(){return this.childForm.querySelector(`template#product-form-${this.sectionId}-${this.productId}`).content}get product(){return!!this.childForm&&window.eight.safeJSONParse(this.childForm.getAttribute("product"))}get mainProductForm(){return document.querySelector('[data-name="main-product-form"]')}get headerSection(){return document.querySelector('[data-aid="header-section"]')}}customElements.define("product-form-sticky",e)})()})();